# LangGraph Server

åŸºäº LangChain.js å’Œ LangGraph çš„ AI Agent æœåŠ¡

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– ç®€å•çš„ AI Agent å®ç°
- ğŸ§  ä½¿ç”¨ DeepSeek ä½œä¸ºå¤§è¯­è¨€æ¨¡å‹
- ğŸ› ï¸ å†…ç½®å·¥å…·ï¼šè®¡ç®—å™¨å’Œé—®å€™å·¥å…·
- ğŸš€ ä½¿ç”¨ langgraph-cli å¯åŠ¨æœåŠ¡
- ğŸ“ TypeScript æ”¯æŒ
- ğŸ”’ è‡ªåŠ¨å¤„ç†èº«ä»½/æ¨¡å‹ç›¸å…³é—®é¢˜

## å®‰è£…ä¾èµ–

```bash
npm install
```

## å®‰è£… LangGraph CLI

```bash
npm install -g @langchain/langgraph-cli
```

## ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
# DeepSeek API é…ç½®ï¼ˆå¿…éœ€ï¼‰
DEEPSEEK_API_KEY=your_deepseek_api_key_here

# å¯é€‰ï¼šè‡ªå®šä¹‰ DeepSeek API åœ°å€ï¼ˆé»˜è®¤ï¼šhttps://api.deepseek.com/v1ï¼‰
DEEPSEEK_API_BASE=https://api.deepseek.com/v1

# å¯é€‰ï¼šè‡ªå®šä¹‰æ¨¡å‹åç§°ï¼ˆé»˜è®¤ï¼šdeepseek-chatï¼‰
DEEPSEEK_MODEL=deepseek-chat
```

**æ³¨æ„ï¼š** æœ¬é¡¹ç›®ä»…ä½¿ç”¨ DeepSeek æ¨¡å‹ï¼Œä¸æ”¯æŒå…¶ä»–æ¨¡å‹ã€‚å¦‚æœæœªè®¾ç½® `DEEPSEEK_API_KEY`ï¼ŒæœåŠ¡å°†æ— æ³•å¯åŠ¨ã€‚

## å¼€å‘

ä½¿ç”¨ langgraph-cli å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
npm run dev
```

æˆ–è€…ç›´æ¥ä½¿ç”¨ï¼š

```bash
langgraph dev
```

å¯åŠ¨åï¼Œä½ å°†çœ‹åˆ°ï¼š
- ğŸš€ API: http://127.0.0.1:2024
- ğŸ¨ Studio UI: http://127.0.0.1:2024/studio

### ç«¯å£å ç”¨é—®é¢˜

å¦‚æœé‡åˆ° `EADDRINUSE: address already in use` é”™è¯¯ï¼Œè¯´æ˜ç«¯å£ 2024 å·²è¢«å ç”¨ã€‚å¸¸è§åŸå› ï¼š

1. **è¿›ç¨‹æœªå®Œå…¨é€€å‡º**ï¼šä½¿ç”¨ Ctrl+C ç»ˆæ­¢ç¨‹åºæ—¶ï¼Œå¦‚æœè¿›ç¨‹æ²¡æœ‰æ­£ç¡®æ¸…ç†èµ„æºï¼Œç«¯å£å¯èƒ½ä»è¢«å ç”¨
2. **TIME_WAIT çŠ¶æ€**ï¼šTCP è¿æ¥å…³é—­åï¼ŒWindows ä¼šä¿æŒç«¯å£åœ¨ TIME_WAIT çŠ¶æ€ä¸€æ®µæ—¶é—´ï¼ˆé€šå¸¸ 30-120 ç§’ï¼‰
3. **è¿›ç¨‹æŒ‚èµ·**ï¼šè¿›ç¨‹å¯èƒ½å¤„äºæŒ‚èµ·çŠ¶æ€ï¼Œæ²¡æœ‰å“åº”ç»ˆæ­¢ä¿¡å·

**è§£å†³æ–¹æ¡ˆï¼š**

1. **ä½¿ç”¨ä¾¿æ·è„šæœ¬**ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   npm run kill-port
   ```

2. **æ‰‹åŠ¨ç»ˆæ­¢è¿›ç¨‹**ï¼š
   ```bash
   # æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
   netstat -ano | findstr :2024
   # ç»ˆæ­¢è¿›ç¨‹ï¼ˆæ›¿æ¢ PID ä¸ºå®é™…è¿›ç¨‹IDï¼‰
   taskkill /PID <PID> /F
   ```

3. **ä½¿ç”¨ PowerShell è„šæœ¬**ï¼š
   ```powershell
   .\kill-port.ps1 -Port 2024
   ```

4. **ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬**ï¼š
   ```cmd
   kill-port.bat 2024
   ```

5. **ä½¿ç”¨å…¶ä»–ç«¯å£**ï¼š
   ```bash
   langgraphjs dev --port 3000
   ```

## æ„å»º

```bash
npm run build
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ src/
â”‚   â””â”€â”€ graphs/
â”‚       â””â”€â”€ agent.ts      # Agent å›¾å®šä¹‰
â”œâ”€â”€ langgraph.json        # LangGraph é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ package.json          # é¡¹ç›®é…ç½®
```

## Agent åŠŸèƒ½

å½“å‰å®ç°çš„ Agent åŒ…å«ä»¥ä¸‹å·¥å…·ï¼š

1. **calculator** - æ‰§è¡ŒåŸºæœ¬æ•°å­¦è¿ç®—ï¼ˆåŠ ã€å‡ã€ä¹˜ã€é™¤ï¼‰
2. **greet** - å‘ç”¨æˆ·æ‰“æ‹›å‘¼

### èº«ä»½å›ç­”æœºåˆ¶

å½“ç”¨æˆ·è¯¢é—®èº«ä»½ã€æ¨¡å‹æˆ–ç›¸å…³é—®é¢˜ï¼ˆå¦‚"ä½ æ˜¯è°"ã€"ä½ æ˜¯ä»€ä¹ˆæ¨¡å‹"ç­‰ï¼‰æ—¶ï¼ŒAgent ä¼šç›´æ¥è¿”å›å›ºå®šçš„èº«ä»½å›ç­”ï¼Œä¸ä¼šè°ƒç”¨ DeepSeek æ¨¡å‹ã€‚è¿™ç¡®ä¿äº†èº«ä»½ä¿¡æ¯çš„ä¸€è‡´æ€§å’Œå‡†ç¡®æ€§ã€‚

## ä½¿ç”¨ç¤ºä¾‹

å¯åŠ¨æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡ API æˆ– Studio UI ä¸ Agent äº¤äº’ï¼š

```bash
# ä½¿ç”¨ curl æµ‹è¯•
curl -X POST http://127.0.0.1:2024/threads \
  -H "Content-Type: application/json" \
  -d '{
    "assistant_id": "agent",
    "input": {
      "messages": [{"role": "user", "content": "è®¡ç®— 10 + 5"}]
    }
  }'
```

## æ‰©å±•å¼€å‘

åœ¨ `src/graphs/agent.ts` ä¸­å¯ä»¥ï¼š
- æ·»åŠ æ›´å¤šå·¥å…·
- ä¿®æ”¹ Agent é€»è¾‘
- è‡ªå®šä¹‰çŠ¶æ€ç®¡ç†

